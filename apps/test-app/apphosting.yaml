# Settings for Backend (on Cloud Run).
runConfig:
  minInstances: 0
  maxInstances: 10
  command: ["node", "server/main.js"]
  entryPoint: "dist/apps/test-app"
  env:
    - variable: NODE_OPTIONS
      value: --require ./ssr-polyfills.js

env:
  - variable: APP_ID
    value: test-app
  - variable: NODE_ENV
    value: production
  - variable: STREAM_API_KEY
    secret: STREAM_API_KEY
  - variable: NEXT_PUBLIC_FIREBASE_RECAPTCHA_KEY
    secret: NEXT_PUBLIC_FIREBASE_RECAPTCHA_KEY
  - variable: NEXT_PUBLIC_NX_CLOUD_ACCESS_TOKEN
    secret: NEXT_PUBLIC_NX_CLOUD_ACCESS_TOKEN
  - variable: NEXT_PUBLIC_SVC_GMAP_KEY
    secret: NEXT_PUBLIC_SVC_GMAP_KEY
  - variable: NEXT_PUBLIC_IMGIX_BASE_URL
    secret: NEXT_PUBLIC_IMGIX_BASE_URL
  - variable: IPINFO_TOKEN
    secret: IPINFO_TOKEN

scripts:
  buildCommand: echo "TEST BUILDCOMMAND"
